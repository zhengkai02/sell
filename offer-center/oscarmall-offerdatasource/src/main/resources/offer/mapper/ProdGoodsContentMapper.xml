<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.iwhalecloud.retail.offer.mapper.ProdGoodsContentMapper">

    <sql id="prod_goods_content_column">
        a.goods_content_id,a.goods_id,a.goods_content_type,a.content_id,
        a.state,a.state_date,a.create_time,a.create_by, a.modify_by, a.modify_time,a.device_type
    </sql>

    <select id="selectGoodsContentById" resultType="com.iwhalecloud.retail.offer.entity.ProdGoodsContent">
        select <include refid="prod_goods_content_column"/>
          from tbl_prod_goods_content a
         where a.goods_content_id = #{goodsContentId}
    </select>

    <select id="selectGoodsContentByGoodsId" resultType="com.iwhalecloud.retail.offer.entity.ProdGoodsContent">
        select <include refid="prod_goods_content_column"/>
          from tbl_prod_goods_content a
         where a.goods_id = #{request.goodsId} and a.state != 'X'
        <if test="request.goodsContentType != null and request.goodsContentType != '' ">
           and a.goods_content_type = #{request.goodsContentType}
        </if>
        <if test="request.deviceType != null and request.deviceType != '' ">
            and a.device_type = #{request.deviceType}
        </if>
    </select>


    <select id="selectGoodsContentByGoodsIds" resultType="com.iwhalecloud.retail.offer.entity.ProdGoodsContent">
        select <include refid="prod_goods_content_column"/>
        from tbl_prod_goods_content a
        where a.goods_id
        in
        <foreach collection="goodsIds" index="index" item="item" separator="," open="(" close=")">
            #{item}
        </foreach>
        and a.state != 'X'
    </select>

</mapper>